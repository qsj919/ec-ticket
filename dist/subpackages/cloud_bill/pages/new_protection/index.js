"use strict";require("../../sub-vendors.js");(wx.webpackJsonp=wx.webpackJsonp||[]).push([[1038],{62998:function(t,e,n){var a=n(32180),i=n(18453),c=n(66058),s=n(57543),r=n(77886),o=n(33661),u=n(12742),l=n(22700),p=n(95333),h=n(14175),w=n(3701),d=n(92954),f=n.n(d),_=n(67294),m=n(71515),v=n(39331),Z=n(52352),g=n(85893),y=function(t){(0,p.Z)(n,t);var e=(0,h.Z)(n);function n(){var t;(0,o.Z)(this,n);for(var a=arguments.length,u=new Array(a),p=0;p<a;p++)u[p]=arguments[p];return t=e.call.apply(e,[this].concat(u)),(0,w.Z)((0,l.Z)(t),"state",{switchMenu:[{id:"",flag:!1,value:3},{id:"",flag:!1,value:5},{id:"",flag:!1,value:7},{id:"",flag:!1,value:10}],switchBtn:!1,days:0}),(0,w.Z)((0,l.Z)(t),"init",(0,r.Z)((0,s.Z)().mark((function e(){var n;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.props.dispatch({type:"goodsManage/selectShopProtectDays"});case 2:n=t.props.shopProtectDays,t.state.switchMenu.map((function(e,a){e.value===n&&t.onMenuClick(a)})),t.setState({days:n,switchBtn:n>0});case 5:case"end":return e.stop()}}),e)})))),(0,w.Z)((0,l.Z)(t),"onSwitchChange",(function(e){e.detail.value?t.onMenuClick(0):(t.clearSwitchStatu(),t.setState({days:0})),t.setState({switchBtn:e.detail.value})})),(0,w.Z)((0,l.Z)(t),"onMenuClick",(function(e){t.clearSwitchStatu(),t.setState((function(t){var n=t.switchMenu.map((function(t,n){return(0,c.Z)((0,c.Z)({},t),{},{flag:e===n})}));return{days:t.switchMenu[e].value,switchBtn:!0,switchMenu:(0,i.Z)(n)}}))})),(0,w.Z)((0,l.Z)(t),"clearSwitchStatu",(function(){t.setState((function(t){var e=t.switchMenu.map((function(t){return(0,c.Z)((0,c.Z)({},t),{},{flag:!1})}));return{switchMenu:(0,i.Z)(e)}}))})),(0,w.Z)((0,l.Z)(t),"setDay",(function(e){var n=parseInt(e.detail.value||0);t.setState({days:n,switchBtn:n>0});var a=!1;t.state.switchMenu.forEach((function(e,i){e.value===n&&(t.onMenuClick(i),a=!0)})),a||t.clearSwitchStatu()})),(0,w.Z)((0,l.Z)(t),"submitBtnClick",(0,r.Z)((0,s.Z)().mark((function e(){var n;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.state.days,f().showLoading(),e.next=4,t.props.dispatch({type:"goodsManage/updateShopProtectDays",payload:{pubDelayDay:n}});case 4:f().hideLoading(),f().navigateBack();case 6:case"end":return e.stop()}}),e)})))),t}return(0,u.Z)(n,[{key:"componentDidMount",value:function(){this.init()}},{key:"render",value:function(){var t=this,e=this.state,n=e.switchMenu,a=e.switchBtn,i=e.days;return(0,g.jsxs)(m.View,{className:"protection_wrap",children:[(0,g.jsx)(v.Z,{title:"新款保护",explain:"开启后新款不自动上架",defaultValue:a,onItemClick:this.onSwitchChange,mode:Z.I.switch}),(0,g.jsxs)(m.View,{className:"protection_wrap_center",children:[(0,g.jsxs)(m.View,{style:{borderTop:"0.5px solid #f7f7f7"},className:"protection_wrap_center_item",children:[(0,g.jsx)(m.Text,{children:"新款保护时间"}),(0,g.jsxs)(m.View,{className:"protection_wrap_center_item_inputView",children:[(0,g.jsx)(m.Input,{className:"protection_wrap_center_item_inputView_input",type:"number",placeholder:"请输入天数",value:i+"",onInput:this.setDay}),"天"]})]}),(0,g.jsx)(m.View,{className:"protection_wrap_center_switchItems",children:(0,g.jsx)(m.View,{className:"protection_wrap_center_switchItems_switchTab",children:n.map((function(e,n){return(0,g.jsx)(m.View,{className:e.flag?"protection_wrap_center_switchItems_switchTab_item chooseItem":"protection_wrap_center_switchItems_switchTab_item",onClick:function(){t.onMenuClick(n)},children:(0,g.jsxs)(m.Text,{children:[e.value,"天"]})},e.value)}))})})]}),(0,g.jsx)(m.View,{className:"protection_wrap_save",onClick:this.submitBtnClick,children:"保存"})]})}}]),n}(_.PureComponent),x=onnect((function(t){return{shopProtectDays:t.goodsManage.shopProtectDays}}))(y);Page((0,a.createPageConfig)(x,"subpackages/cloud_bill/pages/new_protection/index",{root:{cn:[]}},{navigationBarTitleText:"新款保护"}||{}))}},function(t){t.O(0,[666,1772,2107,1216],(function(){return e=62998,t(t.s=e);var e}));t.O()}]);