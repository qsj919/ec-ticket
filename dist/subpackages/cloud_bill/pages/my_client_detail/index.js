"use strict";require("../../sub-vendors.js");require("../../sub-common/ea5651c74a764b7a53f5764aba833936.js");(wx.webpackJsonp=wx.webpackJsonp||[]).push([[1122],{54475:function(e,a,t){var s=t(32180),i=t(57543),r=t(77886),n=t(66058),l=t(18453),o=t(65712),c=t(33661),d=t(12742),p=t(22700),m=t(95333),h=t(14175),u=t(3701),w=t(92954),g=t.n(w),_=t(67294),f=t(75508),A=t(71515),k=t(9335),x=t(1695),I=t(19806),V=t(52131),N=t(49181),v=t(44559),y=t(63056),j=t(31254),C=t(76449),Z=t(94184),S=t.n(Z),D=t(41115),U=t(14067),P=t(86792),b=t(64962),L=t(6420),T=t(76420),B=t(40068),M=t(3258),E=t(59009),R=t(85893),K=function(e){(0,m.Z)(t,e);var a=(0,h.Z)(t);function t(){return(0,c.Z)(this,t),a.apply(this,arguments)}return(0,d.Z)(t,[{key:"onBigImageView",value:function(e,a){var t=[];e.styles&&(e.styles.forEach((function(e){t.push(e.imgUrl)})),g().previewImage({current:t[a],urls:t}))}},{key:"render",value:function(){var e=this,a=this.props,t=a.data,s=a.loading,i=a.noMoreDataVisible;return(0,R.jsx)(M.Z,{loadMoreDataVisible:s,noMoreDataVisible:i,children:t.map((function(a,t){return(0,R.jsxs)(A.View,{className:"records_list_wrap",children:[(0,R.jsx)(A.View,{className:"records_list_wrap_left",children:(0,R.jsx)(A.View,{children:a.proDate===(0,L.GB)()?"今天":a.proDate})}),a.styles&&a.styles.length?(0,R.jsxs)(A.View,{className:"records_list_wrap_center",children:[(0,R.jsx)(A.View,{className:"arc"}),(0,R.jsx)(A.View,{className:"line"}),(0,R.jsx)(A.View,{className:"arc"})]}):(0,R.jsx)(A.View,{}),a.styles&&a.styles.length?(0,R.jsxs)(A.View,{className:"records_list_wrap_right",children:[(0,R.jsx)(A.View,{className:"records_list_wrap_right_title",children:(0,R.jsx)(A.Text,{className:"titleColor",children:"浏览了以下商品"})}),(0,R.jsx)(A.View,{className:"records_list_wrap_right_center",children:a.styles&&a.styles.map((function(t,s){return(0,R.jsxs)(A.View,{className:"records_list_wrap_right_center_item",children:[(0,R.jsx)(A.View,{className:"img",onClick:function(){e.onBigImageView(a,s)},children:(0,R.jsx)(B.Z,{lazyLoad:!0,mode:"aspectFit",src:t.imgUrl||E})}),(0,R.jsxs)(A.Text,{className:"code",children:["#",t.code]})]},t.id)}))}),(0,R.jsx)(A.View,{className:"records_list_wrap_right_title",children:(0,R.jsxs)(A.Text,{className:"titleColor",children:["打开云单",a.eventNum,"次"]})})]}):(0,R.jsx)(A.View,{className:"records_list_wrap_right",children:(0,R.jsx)(A.View,{className:"records_list_wrap_right_title",children:(0,R.jsxs)(A.Text,{className:"titleColor",children:["打开云单",a.eventNum,"次"]})})})]},t)}))})}}]),t}(_.Component);(0,u.Z)(K,"defaultProps",{data:[]});var q=function(e){(0,m.Z)(t,e);var a=(0,h.Z)(t);function t(){return(0,c.Z)(this,t),a.apply(this,arguments)}return(0,d.Z)(t,[{key:"render",value:function(){var e=this.props,a=e.data,t=e.loading,s=e.noMoreDataVisible;return(0,R.jsx)(M.Z,{loadMoreDataVisible:t,noMoreDataVisible:s,children:a.map((function(e){return(0,R.jsxs)(A.View,{className:"pick_up_list_wrap",children:[(0,R.jsxs)(A.View,{className:"pick_up_list_wrap_top",children:[(0,R.jsxs)(A.Text,{children:["批次号 ",e.billno]}),(0,R.jsxs)(A.Text,{children:["下单时间 ",e.prodate]})]}),(0,R.jsxs)(A.View,{className:"pick_up_list_wrap_bottom",children:[(0,R.jsx)(A.View,{className:"pick_up_list_wrap_bottom_left",children:(0,R.jsx)(B.Z,{mode:"aspectFit",src:e.imgUrl&&(e.imgUrl[0]||e.imgUrl[1])||E})}),(0,R.jsxs)(A.View,{className:"pick_up_list_wrap_bottom_right",children:[(0,R.jsx)(A.View,{className:"stylename",children:e.stylename}),(0,R.jsxs)(A.View,{className:"fontColorSmall",children:["款号 ",e.stylecode]}),(0,R.jsxs)(A.View,{className:"count_price",children:[(0,R.jsxs)(A.Text,{className:"fontColorSmall",children:["×",e.num]}),(0,R.jsxs)(A.Text,{children:["¥",e.total]})]})]})]})]},e.billno)}))})}}]),t}(_.Component);(0,u.Z)(q,"defaultProps",{data:[]});t(75202);var Y=[{label:"浏览记录",value:0},{label:"拿货记录",value:1}],F=function(e){(0,m.Z)(t,e);var a=(0,h.Z)(t);function t(){var e;(0,c.Z)(this,t);for(var s=arguments.length,d=new Array(s),m=0;m<s;m++)d[m]=arguments[m];return e=a.call.apply(a,[this].concat(d)),(0,u.Z)((0,p.Z)(e),"state",{activeTabIndex:0,detailsPageNo:1,browsePageNo:1,dwName:"",dwList:[],isDwListVisible:!1,priceType:{},isSettingModalVisible:!1,remarkValue:"",alertIsShow:!1,showPriceValue:!1,blockValue:!1}),(0,u.Z)((0,p.Z)(e),"pageNo",1),(0,u.Z)((0,p.Z)(e),"init",(function(){var a=e.getRequestParams(!0);e.fetchTotaldata(a),e.fetchBrowseList(a),e.fetchPickUpList(e.getRequestParams(!1));var t=e.getItem();e.props.dispatch({type:"goodsManage/selectShopParamSpuShowPrice",payload:{erpParamFirst:!1,mpUserId:t.mpUserId}}),Promise.all([e.props.dispatch({type:"goodsManage/selectShopDefaulPriceType",payload:{mpUserId:t.mpUserId,erpParamFirst:!1}}),e.props.dispatch({type:"goodsManage/selectShopPriceTypeList"})]).then((function(a){var s=(0,o.Z)(a,2),i=s[0],r=s[1];e.setState({priceType:r.find((function(e){return e.sid===i})),showPriceValue:"1"===e.props.spuShowPrice,blockValue:"1"===t.shopBlackUser,remarkValue:t.remark})}))})),(0,u.Z)((0,p.Z)(e),"fetchDwList",(function(){(0,C.ME)({mpErpId:e.props.mpErpId,dwname:e.state.dwName,curpageno:e.pageNo,pagesize:j.IV}).then((function(a){var t=a.data;e.setState((function(a){return{dwList:1===e.pageNo?t.rows:[].concat((0,l.Z)(a.dwList),(0,l.Z)(t.rows))}}))}))})),(0,u.Z)((0,p.Z)(e),"refreshDwList",(function(){e.pageNo=1,e.fetchDwList()})),(0,u.Z)((0,p.Z)(e),"fetchMoreDwList",(function(){e.pageNo*j.IV>e.state.dwList.length||(e.pageNo++,e.fetchDwList())})),(0,u.Z)((0,p.Z)(e),"onDwClick",(function(a){e.setState((function(e){return{dwList:e.dwList.map((function(e){return(0,n.Z)((0,n.Z)({},e),{},{checked:a===e.id})}))}}))})),(0,u.Z)((0,p.Z)(e),"onInput",(function(a){e.setState({dwName:a})})),(0,u.Z)((0,p.Z)(e),"clearInputClick",(function(a){e.setState({dwName:a},(function(){e.refreshDwList()})),e.pageNo=1})),(0,u.Z)((0,p.Z)(e),"hideDwList",(function(){var a=e.getItem();e.setState({isDwListVisible:!1,isSettingModalVisible:!1,alertIsShow:!1,remarkValue:a.remark||""})})),(0,u.Z)((0,p.Z)(e),"onTabClick",(function(a){e.setState({activeTabIndex:a})})),(0,u.Z)((0,p.Z)(e),"_reachBottom",(function(){var a=e.state,t=a.activeTabIndex,s=a.browsePageNo,i=a.detailsPageNo,r=e.props,n=r.userShopViewData,l=r.shopSalesDetails;t?e.isMoreData(i,l)&&e.setState((function(e){return{detailsPageNo:e.detailsPageNo+1}}),(function(){e.fetchPickUpList(e.getRequestParams(!1))})):e.isMoreData(s,n)&&e.setState((function(e){return{browsePageNo:e.browsePageNo+1}}),(function(){e.fetchBrowseList(e.getRequestParams(!0))}))})),(0,u.Z)((0,p.Z)(e),"onBlockClick",function(){var a=(0,r.Z)((0,i.Z)().mark((function a(t){var s;return(0,i.Z)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:s=e.getItem(),e.setState({isSettingModalVisible:!0,remarkValue:s.remark});case 2:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()),(0,u.Z)((0,p.Z)(e),"onBindClick",(function(){e.refreshDwList(),e.setState({isDwListVisible:!0})})),(0,u.Z)((0,p.Z)(e),"onConfirmBindClick",(function(){var a=e.state.dwList.find((function(e){return e.checked}));if(a){var t="确定与商陆花客户【".concat(a.dwname,"】绑定？绑定后的单据会同步至客户【").concat(a.dwname,"】之下");y.Z.showAlertWithCancel(t,"确定绑定该客户？",e.onConfirmBind)}else y.Z.showToast("请选择客户")})),(0,u.Z)((0,p.Z)(e),"onConfirmBind",(function(){var a,t=(0,L.JU)(null===(a=g().getCurrentInstance)||void 0===a?void 0:a.call(g())).mpUserId,s=e.state.dwList.find((function(e){return e.checked}));s?(e.hideDwList(),(0,C.P0)({dwId:s.id,mpErpId:e.props.mpErpId,mpUserId:t}).then((function(){e.props.dispatch({type:"goodsManage/updateLocalViewers",payload:{dwId:s.id,mpUserId:t,dwName:s.dwname}}),y.Z.showToast("绑定成功"),g().eventCenter.trigger("UPDATE_BIND")}))):y.Z.showToast("请选择客户")})),(0,u.Z)((0,p.Z)(e),"getItem",(function(){var a,t=(0,L.JU)(null===(a=g().getCurrentInstance)||void 0===a?void 0:a.call(g())),s=t.viewDate,i=t.mpUserId,r=t.fromOrder,n=void 0===r?"0":r,o=e.props,c=o.usersListValues,d=o.myClientList;if("1"===n)return[].concat((0,l.Z)(c),(0,l.Z)(d)).filter((function(e){return e.mpUserId===parseInt(i)}))[0];var p=e.getViewersList()[s];return p&&p.filter((function(e){return e.mpUserId===parseInt(i)}))[0]})),(0,u.Z)((0,p.Z)(e),"onCallPhoneClick",(function(){if(e.props.showPhone){var a=e.getItem();a.phone&&g().makePhoneCall({phoneNumber:a.phone})}})),(0,u.Z)((0,p.Z)(e),"onSwitchChange",(function(a){var t=a.currentTarget.dataset.key,s=a.detail.value;"showPrice"===t&&e.setState({showPriceValue:s}),"block"===t&&e.setState({blockValue:s})})),(0,u.Z)((0,p.Z)(e),"onSelectClick",(function(a){var t=a.currentTarget.dataset.key,s=e.props.priceTypeList,i=void 0===s?[]:s;if("priceType"===t)g().showActionSheet({itemList:i.map((function(e){return e.name})),success:function(a){var t=a.tapIndex;e.setState({priceType:i[t]})}})})),(0,u.Z)((0,p.Z)(e),"onSettingConfirm",(0,r.Z)((0,i.Z)().mark((function a(){var t,s,r,n,l,o,c;return(0,i.Z)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t=e.getItem(),s=e.state,r=s.priceType,n=s.remarkValue,l=s.showPriceValue,o=s.blockValue,c=e.props.mpErpId,g().showLoading({title:"请稍等..."}),a.next=6,e.props.dispatch({type:"goodsManage/updataUserJurisdiction",payload:{mpUserId:t.mpUserId,code:"shop_black_user",val:o?"1":"0"}});case 6:if(!r){a.next=9;break}return a.next=9,e.props.dispatch({type:"goodsManage/updateShopParamVal",payload:{code:"spu_default_price_type",val:r.sid,mpErpId:c,mpUserId:t.mpUserId}});case 9:return a.next=11,e.props.dispatch({type:"goodsManage/updateShopParamVal",payload:{code:"spu_show_price",mpErpId:c,mpUserId:t.mpUserId,val:l?"1":"0"}});case 11:(0,U.yL)({jsonParam:{mpErpId:c,mpUserId:t.mpUserId,remark:n||""}}),e.props.dispatch({type:"goodsManage/updateClientPriceType",payload:{mpUserId:t.mpUserId,remark:n||"",type:"remark"}}),r&&e.props.dispatch({type:"goodsManage/updateClientPriceType",payload:{mpUserId:t.mpUserId,priceType:r.sid,type:"priceType"}}),g().hideLoading(),e.hideDwList(),e.props.dispatch({type:"goodsManage/selectShopParamSpuShowPrice",payload:{erpParamFirst:!1,mpUserId:t.mpUserId}});case 17:case"end":return a.stop()}}),a)})))),(0,u.Z)((0,p.Z)(e),"onRemarkInput",(function(a){e.setState({remarkValue:a.detail.value})})),(0,u.Z)((0,p.Z)(e),"onClearInput",(function(){e.setState({remarkValue:""})})),(0,u.Z)((0,p.Z)(e),"onRemarkClick",(function(){e.setState({alertIsShow:!0})})),(0,u.Z)((0,p.Z)(e),"onRemarkSave",(function(){e.setState({alertIsShow:!1})})),(0,u.Z)((0,p.Z)(e),"onRemarkCancel",(function(){e.setState({alertIsShow:!1,remarkValue:e.getItem().remark})})),(0,u.Z)((0,p.Z)(e),"getMenu",(function(){var a=e.state,t=a.priceType,s=a.showPriceValue,i=a.blockValue,r=a.remarkValue;return e.getItem()?[{label:"客户备注",type:"input",value:r||"去设置",key:"remark"},{label:"允许看到价格",type:"switch",value:s,key:"showPrice"},{label:"看到的价格类型",type:"select",value:t?t.name:"无",key:"priceType"},{label:"拉黑该用户",type:"switch",value:i,key:"block"}]:[]})),(0,u.Z)((0,p.Z)(e),"renderAlertInput",(function(){var a=e.state.alertIsShow,t=e.state.remarkValue;return(0,R.jsxs)(A.View,{className:"alert_input_view",children:[(0,R.jsx)(A.View,{className:"alert_input_view__header",children:"客户备注"}),(0,R.jsxs)(A.View,{className:"alert_input_view__input",children:[(0,R.jsx)(A.Input,{placeholder:"请输入备注",className:"alert_input_view__input___com",onInput:e.onRemarkInput,value:t,focus:a}),t&&(0,R.jsx)(A.Image,{src:b,onClick:e.onClearInput,className:"alert_input_view__input___delete"})]}),(0,R.jsxs)(A.View,{className:"alert_input_view__action",children:[(0,R.jsx)(A.View,{className:"alert_input_view__action__cancel",onClick:e.onRemarkCancel,children:"取消"}),(0,R.jsx)(A.View,{className:"alert_input_view__action__confirm",onClick:e.onRemarkSave,children:"确定"})]})]})})),e}return(0,d.Z)(t,[{key:"componentDidMount",value:function(){this.init()}},{key:"componentWillUnmount",value:function(){this.props.dispatch({type:"goodsManage/clearUserDetailData"})}},{key:"componentDidShow",value:function(){(0,D.ZT)("客户详情")}},{key:"fetchTotaldata",value:function(e){this.props.dispatch({type:"goodsManage/selectShopViewerSalesData",payload:(0,n.Z)({},e)})}},{key:"fetchBrowseList",value:function(e){var a=this.state.browsePageNo;this.props.dispatch({type:"goodsManage/selectUserShopViewData",payload:(0,n.Z)({pageNo:a},e)})}},{key:"fetchPickUpList",value:function(e){var a=this.state.detailsPageNo;0!==e.dwid&&this.props.dispatch({type:"goodsManage/selectUserShopSalesDetails",payload:(0,n.Z)({curpageno:a},e)})}},{key:"getRequestParams",value:function(e){var a,t=(null===(a=g().getCurrentInstance)||void 0===a?void 0:a.call(g())).params;if(t.dwId&&t.mpUserId)return{dwid:t.dwId,mpUserId:t.mpUserId};var s=this.getItem();return e?{mpUserId:s.mpUserId,dwId:s.dwId}:{dwid:s.dwId}}},{key:"isMoreData",value:function(e,a){return a.length>=20*e}},{key:"getViewersList",value:function(){var e,a=(0,L.JU)(null===(e=g().getCurrentInstance)||void 0===e?void 0:e.call(g())).listType,t=this.props,s=t.usersListValues,i=t.myClientList,r={};return("1"===a?i:s).forEach((function(e){r.hasOwnProperty(e.viewDate)?r[e.viewDate].push((0,n.Z)({},e)):r[e.viewDate]=[(0,n.Z)({},e)]})),r||[]}},{key:"render",value:function(){var e=this,a=this.state,t=a.activeTabIndex,s=a.browsePageNo,i=a.detailsPageNo,r=a.dwList,n=a.isDwListVisible,l=a.isSettingModalVisible,o=a.alertIsShow,c=this.props,d=c.viewerSalesData,p=c.userShopViewData,m=c.isBrowseLoading,h=c.shopSalesDetails,u=c.isPickUpLoading,w=c.showPhone,g=this.getItem(),_=this.getMenu(),f=g&&g.phone||"无";return g&&g.phone&&!w&&(f="****"),(0,R.jsxs)(A.Block,{children:[(0,R.jsxs)(A.ScrollView,{className:S()("my_client_detail",{"my_client_detail--ov":n}),scrollY:!0,onScrollToLower:this._reachBottom,lowerThreshold:500,children:[(0,R.jsxs)(A.View,{className:"user_information",children:[(0,R.jsx)(k.Z,{from:"detail",item:g,onBlockClick:this.onBlockClick,onBindClick:this.onBindClick,itemPadding:"10px"}),(0,R.jsxs)(A.View,{className:"user_information__info",children:[(0,R.jsxs)(A.View,{className:"archives_view",style:"width: 100%;",children:[(0,R.jsxs)(A.View,{className:"fontColorSmall",children:["商陆花档案：",g.dwName]}),(0,R.jsxs)(A.View,{className:"detail_bind_text",onClick:this.onBindClick,children:[(0,R.jsx)(A.Image,{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAydJREFUWEftlk1IFHEYxp/3v7tqUVSItruuRdYl0bWwkCAoDdLwUocIo6LIjNSF8NjBxEOHIArWNdgMpEKJDnWI0kBNOoSUVKPYxYxqv0qkgr7W2f2/MdrGKrPuh4YQznXm//6eeeZ9HoawyBctMh9LAv4PB4prnpsm023HSXIVwJsBlgApEOKGkrn2NppIxtq1eTtgr/bYkG64B3CxPoR6WE4eHLq6/rPe/XkJyK/xrTOa0Acgj0GjJGRjKGzqMxomjWBjOZibAbYC1KNkmffqOZGygILaiVxBwccaHKABYfpV8fLKhi/Rb/nHnYEpEUIcVpzmztkupCygsNZ3kwhHNPg39Uf5mHvjVz2L7fWBk2DZBqBLcVn3LZiAolrfTkk48F392RwLrsHsDo8NUnwA4FVcVtuCCUi0QfNrP5mNFPIDCCguq+WfCNjq8GeFJdqZ0D/UYrk4Yw8c3ipI6gDQp7isZQsuYArO6AVzAUAPFJelMgLZcvbt6rCa8YzAm1iImiGn+VrSArRtJ6FeIBJuxZn9JHrADDjRsIFQ9sJpGdeeyat5s2qFaXk3wCUADZpU745B9zY1KQHROSfC5Vct1obIgMThGENQ7lLabJ6kimg6w6I/kvPoqM0F1yCFdb5LBGhix0IqSkfc1vdJVbHW7aop5+l0vc7MeTy4BpqKKHCakX5uuDVTi2DMS7eICh2BUySlm8GjBtPk9uiGK6r332fmSsz65onGMqEdsNf5ewEuheDDijNnRn0W1fkawFQmDDgRWbhU4do5XQfsdX4/wOYQGy0jrdmB+QDinY0hwOsFyAohcxWn/vZGorYybdl5JuPd2RGNB47cjyHA9xBABUhUKy3m63rDonPOJG4NtZiPJgqNfk5fgCNQBSk7APIhGC6ZnWGt4aSa0TVdMhiTnL473rYnFUM0sbCPBx4BvGdKBFEjKNQdCqeFjAa1lKVo1uo1kZzHcyXm/0DhmXdrSKTdmRah22GDCIb3x2q4eOA5d+DvYc2JiY+HIOUxgO2AEABes6DOtKCnXa/bEwUnJiDZaSk8n/IvWQos/Q+5UINSnbPkwG9Fo2gw+sXaVwAAAABJRU5ErkJggg==",className:"link_img"}),g.dwName?"更换绑定":"绑定客户"]})]}),(0,R.jsx)(A.View,{className:"phone_icon_view",children:(0,R.jsxs)(A.View,{className:"archives_view",onClick:this.onCallPhoneClick,children:["手机号：",f," ",w&&(0,R.jsx)(A.Image,{style:"margin-left: 6px;",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAADmElEQVRYCcVXTUhUURT+7psxmzHNTFN0qikV0rEIS7SC0qWKVhBCRRS0qYgWgYuKRAyFEoQkClq0CFpHmVqrFhZEgoE6RlFpMUlpJooz5s/M6543857znPcz6lhvMe/Od84937k/5+cxRPm43PVrMDhdFoBYLYpiPgPLhIhMaTrDsAhxmDE2IIA9xTbbS7erfjYa08xMydVenxEIeOtE4CQnTDLTDzk0yQ0/EoSEBndl/Q+jOboOlHe0xg/5PdcA8bIoIsHIiJ6MMXgB1uK0OBo7Ky7NaOlpOiCt2u97zLe1RGvSUjF+XG8Ei/2o1m5EOFDQeXXX/Px8O0TRsVQiQ33GPHECq+irvNkXrqdygFbuD/i6Y04uM3InLIK9KHwnBFlGZx7g275q5ETEd5U4iEvmVRygCxerM5eNa72JI3i5g1LpCEKh9mm5t12LyAij6OAhmkNHIe2AFOfLDDUjIj0ZLZQ4Sc4ow/m/eEfNkkyidS2u7zyCQ+l5+PlnArfcz/Bq9KMehznOMGnZnpAmUHo1IydrVwqqUeUoRFKcDbmJGbhTdBpZtg3mRHoalFU5t0C5XU8nHC/lKw9/4i1xfDd2hENLHhO3QIUlmpm8yESo/ZqZisCWAhC3IFW1KGZ5fL9VWoNTI3i9kjvArRG3oJRUlfnIP10jHxSQe46L3Q/hndesL4qe6YCXcyURmSm3fX+HgBiQ1HjdRx2PCAsLTs+0JaNpdw3uF59FzZZiM1OKnJd40ZJ24sAZjmxUUJ3B+KwXRJS/PkvScNhTUJKag+6xz7i99xQO8gu5NSEVZRn5mPHPoWd8SMfSAswX8lWgTmYBMh41D7Tjm3dMUSpMcaKjrBauZHXhPO7cp+gYDYhboDbKSClcNjE3jXNvH2DYN67AVsGijOWB3arUGhnSfEstnNTDaYq1wcGpURzrakWbp4cXN36KGs+L4V4NNBIi7qhTceR0IHvdJhzevAf7U3ORnZgOv+jHc07e2P8E0/weGD6hVCxll7y22rt8MecNJ8RYyAPp3vuq5gtSHFH3GmwgY8yiYy5UjhtILDkQbJFYi47+KsCsRW7LgpmEU1DrTN3rKrCpTBIHccmgqsL816aUPKJtsVqtleDdq+xhzN6htlzeetmucgQy0F/e1EutcyyPg2yRzcXfBMQZ4QCB5KXT6ijlmerGSqKD5pINsrV45cRDj+oOBCH1b6hj/vcfp2o3gNX6PP8LBS1jYRQ5sawAAAAASUVORK5CYII=",className:"link_img"})]})})]}),(0,R.jsx)(A.View,{className:"user_information_items",children:d.map((function(e){return(0,R.jsxs)(A.View,{className:"user_information_items_item",children:[(0,R.jsx)(A.Text,{children:e.value}),(0,R.jsx)(A.Text,{className:"user_information_items_item__label",children:e.title})]},e.title)}))})]}),(0,R.jsx)(A.View,{className:"tabs",children:(0,R.jsx)(x.Z,{data:Y,activeIndex:t,underlineColor:"#E62E4D",textColor:"#222",activeColor:"#E62E4D",onTabItemClick:this.onTabClick,margin:180})}),(0,R.jsx)(A.View,{children:0===t?(0,R.jsx)(K,{loading:m,data:p,noMoreDataVisible:!m&&(p&&p.length)<20*s}):(0,R.jsx)(q,{loading:u,data:h,noMoreDataVisible:!u&&(h&&h.length)<20*i})})]}),(0,R.jsxs)(I.Z,{visible:n||l,direction:V.n.Bottom,className:"bg_trans",maxHeight:100,onRequestClose:this.hideDwList,containerClass:"".concat(l?"setting_containerClass":""),children:[l&&(0,R.jsxs)(A.View,{className:"modal_setting ".concat(o?"hide_modal_setting":"show_modal_setting"),children:[(0,R.jsxs)(A.View,{className:"modal_setting__header aic jcsb",children:[(0,R.jsx)(A.Text,{className:"modal_setting__header__cancel",onClick:this.hideDwList,children:"取消"}),(0,R.jsx)(A.Text,{className:"modal_setting__header__title",children:"设置客户信息"}),(0,R.jsx)(A.Text,{className:"modal_setting__header__confirm",onClick:this.onSettingConfirm,children:"保存"})]}),(0,R.jsx)(A.View,{className:"modal_setting__content aic col",children:_.map((function(a){return(0,R.jsxs)(A.View,{className:"modal_setting__content__item aic jcsb",children:[(0,R.jsx)(A.Text,{className:"modal_setting__content__item__label",children:a.label}),"input"===a.type&&(0,R.jsx)(A.View,{onClick:e.onRemarkClick,className:"input_com",style:{color:"去设置"!==a.value?"#222":"#999"},children:a.value}),"select"===a.type&&(0,R.jsxs)(A.View,{className:"select_com aic",onClick:e.onSelectClick,"data-key":a.key,children:[(0,R.jsx)(A.Text,{children:a.value}),(0,R.jsx)(A.Image,{src:P,className:"angle_right"})]}),"switch"===a.type&&(0,R.jsx)(A.Switch,{"data-key":a.key,checked:a.value,onChange:e.onSwitchChange})]},a.key)}))})]}),n&&(0,R.jsxs)(A.View,{className:"modal",children:[(0,R.jsxs)(A.View,{className:"modal__header aic jcsb",children:[(0,R.jsx)(A.View,{className:"modal__header__cancel modal__header__cancel--trans",children:"取消"}),(0,R.jsx)(A.View,{className:"modal__header__title",children:"选择要绑定的商陆花用户"}),(0,R.jsx)(A.View,{className:"modal__header__cancel",onClick:this.hideDwList,children:"取消"})]}),(0,R.jsxs)(A.View,{className:"modal__search",children:[(0,R.jsx)(v.Z,{onInput:this.onInput,onClearSearchClick:this.clearInputClick,placeholder:"搜索客户",onSearchClick:this.refreshDwList}),(0,R.jsx)(A.View,{className:"modal__search___label",onClick:this.refreshDwList,children:"搜索"})]}),(0,R.jsx)(A.ScrollView,{className:"modal__main",scrollY:!0,onScrollToLower:this.fetchMoreDwList,lowerThreshold:100,children:r.map((function(a){return(0,R.jsxs)(A.View,{className:"aic jcsb modal__dw",onClick:function(){return e.onDwClick(a.id)},children:[(0,R.jsx)(A.View,{children:a.dwname}),a.checked&&(0,R.jsx)(A.Image,{src:T,className:"modal__checked"})]},a.id)}))}),(0,R.jsx)(A.View,{className:"modal__button",children:(0,R.jsx)(N.Z,{label:"绑定客户",onButtonClick:this.onConfirmBindClick})})]})]}),o&&this.renderAlertInput()]})}}]),t}(_.PureComponent),G=(0,f.$j)((function(e){var a=e.goodsManage,t=e.loading;return{mpErpId:a.mpErpId,viewerSalesData:a.viewerSalesData,userShopViewData:a.userShopViewData,shopSalesDetails:a.shopSalesDetails,usersListValues:a.viewDataViewers,myClientList:a.myClientList,priceTypeList:a.priceTypeList.filter((function(e){return"1"===e.delflag})),spuShowPrice:a.spuShowPrice,isBrowseLoading:t.effects["goodsManage/selectUserShopViewData"]&&t.effects["goodsManage/selectUserShopViewData"].loading,isPickUpLoading:t.effects["goodsManage/selectUserShopSalesDetails"]&&t.effects["goodsManage/selectUserShopSalesDetails"].loading,showPhone:"1"===a.allowStaffViewClientPhone||"总经理"===a.staffInfo.rolename||"總經理"===a.staffInfo.rolename}}))(F);Page((0,s.createPageConfig)(G,"subpackages/cloud_bill/pages/my_client_detail/index",{root:{cn:[]}},{navigationBarTitleText:"客户详情"}||{}))}},function(e){e.O(0,[666,1772,6690,2107,1216,8592],(function(){return a=54475,e(e.s=a);var a}));e.O()}]);