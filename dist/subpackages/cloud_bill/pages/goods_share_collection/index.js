"use strict";require("../../sub-vendors.js");require("../../sub-common/ea5651c74a764b7a53f5764aba833936.js");require("../../sub-common/60464b2b77061df0626bd7ecea16c659.js");(wx.webpackJsonp=wx.webpackJsonp||[]).push([[6794],{1454:function(e,a,s){var o=s(32180),t=s(66058),i=s(65712),c=s(33661),p=s(12742),r=s(22700),l=s(95333),n=s(14175),d=s(3701),h=s(92954),g=s.n(h),m=s(67294),u=s(71515),_=s(75508),I=s(86792),b=s(14067),f=s(76449),w=s(6420),v=s(75527),x=s(89893),y=s(69558),k=s(85893),Z=function(e){(0,l.Z)(s,e);var a=(0,n.Z)(s);function s(){var e;(0,c.Z)(this,s);for(var o=arguments.length,p=new Array(o),l=0;l<o;l++)p[l]=arguments[l];return e=a.call.apply(a,[this].concat(p)),(0,d.Z)((0,r.Z)(e),"state",{goodsList:[],enableVisitor:!0,type:-1,title:""}),(0,d.Z)((0,r.Z)(e),"init",(function(){var a,s=(0,w.JU)(null===(a=g().getCurrentInstance)||void 0===a?void 0:a.call(g())),o=s.groupId,t=s.mpErpId,i=s.scene,c=s.spuGroupId;if((o||c)&&t&&e.props.sessionId&&e.fetchData(t,o||c),i){var p=decodeURIComponent(i).split(",");e.fetchData(p[0],p[1])}})),(0,d.Z)((0,r.Z)(e),"fetchData",(function(a,s){g().showLoading({title:"请稍等..."}),e.props.dispatch({type:"cloudBill/fetchVideoPageDataByMpErpId",payload:{mpErpId:a}}),(0,f.mW)({mpErpId:a,mpUserId:e.props.mpUserId}).then((function(o){var t=o.data;e.props.dispatch({type:"cloudBill/save",payload:{mpErpId:a}}),e.props.dispatch({type:"replenishment/save",payload:{mpErpId:a}}),e.props.dispatch({type:"goodsManage/selectShopParamSpuShowPrice",payload:{mpErpId:a,erpParamFirst:!1,mpUserId:e.props.mpUserId}}),e.props.dispatch({type:"goodsManage/selectShopParamSpuShowInv",payload:{mpErpId:a}}),Promise.all([(0,b.nP)({id:s}),(0,b.X)({pageNo:1,pageSize:40,jsonParam:{type:8,mpErpId:a,groupId:s}})]).then((function(a){var s=(0,i.Z)(a,2),o=s[0],c=s[1];0!==o.data.flag?(0===o.data.type?g().setNavigationBarTitle({title:"自定义集合"}):1===o.data.type?g().setNavigationBarTitle({title:"爆款集合"}):g().setNavigationBarTitle({title:"上新集合"}),e.setState({goodsList:c.data.rows,enableVisitor:t.val,type:o.data.type,title:o.data.name}),g().hideLoading()):g().redirectTo({url:"/subpackages/cloud_bill/pages/all_goods/index?mpErpId=".concat(e.props.mpErpId)})})).catch((function(){g().hideLoading()}))})).catch((function(e){g().hideLoading()}))})),(0,d.Z)((0,r.Z)(e),"onItemClick",(function(a){e.state.enableVisitor&&(e.props.dispatch({type:"cloudBill/fetchGoodsDetail",payload:{spuId:a.styleId,goodsDtail:(0,t.Z)((0,t.Z)({},a),{},{skus:[]})}}),g().navigateTo({url:"/subpackages/cloud_bill/pages/goods_detail/index?spuId=".concat(a.id)}))})),(0,d.Z)((0,r.Z)(e),"goShop",(function(){g().navigateTo({url:"/subpackages/cloud_bill/pages/all_goods/index?mpErpId=".concat(e.props.mpErpId)})})),(0,d.Z)((0,r.Z)(e),"goCart",(function(){g().navigateTo({url:"/subpackages/cloud_bill/pages/replenishment/index"})})),e}return(0,p.Z)(s,[{key:"componentDidMount",value:function(){this.props.sessionId&&this.init()}},{key:"componentDidUpdate",value:function(e){!e.sessionId&&this.props.sessionId&&this.init()}},{key:"render",value:function(){var e=this,a=this.state,s=a.goodsList,o=a.enableVisitor,t=a.type,i=a.title,c=this.props,p=c.showPrice,r=c.colorSizeVisible,l=c.data,n=c.mpErpId;return(0,k.jsxs)(u.View,{className:"goods_share_collection_page",children:[(0,k.jsx)(u.View,{className:"goods_share_collection_page__header",children:1===t?(0,k.jsx)(u.Image,{className:"header_bg",src:"https://webdoc.hzecool.com/webCdn/weapp/ec-ticket/src/subpackages/cloud_bill/images/ac7c408ee3e7416def2c..png"}):(0,k.jsxs)(u.View,{className:"new_share_view",children:[(0,k.jsx)(u.Image,{className:"header_bg",src:"https://webdoc.hzecool.com/webCdn/weapp/ec-ticket/src/subpackages/cloud_bill/images/1d3e68de72aeb5072936..png"}),(0,k.jsx)(u.Text,{className:"header_title",children:i})]})}),(0,k.jsxs)(u.View,{className:"goods_share_collection_page__shopInfo",children:[(0,k.jsxs)(u.View,{className:"aic",children:[(0,k.jsx)(u.Image,{src:l.logoUrl,className:"shop_logo"}),(0,k.jsx)(u.Text,{className:"shop_name",children:l.shopName})]}),(0,k.jsxs)(u.View,{className:"aic",onClick:this.goShop,children:[(0,k.jsx)(u.Text,{className:"go_shop",children:"进店"}),(0,k.jsx)(u.Image,{src:I,className:"right_icon"})]})]}),(0,k.jsx)(u.View,{className:"goods_share_collection_page__content",children:s.map((function(a){return(0,k.jsx)(u.View,{className:"goods_share_collection_page__content__item",children:(0,k.jsx)(x.Z,{size:"small",data:a,blur:!o,onItemClick:e.onItemClick,showPrice:p,showHotIconForShare:t,from:"allGoods"})},a.id)}))}),o&&(0,k.jsx)(u.Image,{src:"https://webdoc.hzecool.com/webCdn/weapp/ec-ticket/src/subpackages/cloud_bill/images/c9fce410ca5fbcc40a3e..png",className:"goods_car",onClick:this.goCart}),(0,k.jsx)(y.Z,{visible:r,type:"buttons"},"goods_share"),(0,k.jsx)(v.Z,{scanError:l.scanError,mpErpId:n})]})}}]),s}(m.Component),j=(0,_.$j)((function(e){var a=e.user,s=e.cloudBill;e.shop;return{sessionId:a.sessionId,mpUserId:a.mpUserId,showPrice:"1"===s.shopParams.spuShowPrice,mpErpId:s.mpErpId,colorSizeVisible:s.colorSizeVisible,data:s.videoPageData}}))(Z);Page((0,o.createPageConfig)(j,"subpackages/cloud_bill/pages/goods_share_collection/index",{root:{cn:[]}},{navigationBarTitleText:""}||{}))}},function(e){e.O(0,[666,1772,6690,3658,2107,1216,8592],(function(){return a=1454,e(e.s=a);var a}));e.O()}]);