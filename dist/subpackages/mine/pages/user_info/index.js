"use strict";require("../../sub-vendors.js");(wx.webpackJsonp=wx.webpackJsonp||[]).push([[5049],{42932:function(a,e,t){var n=t(32180),r=t(57543),s=t(77886),i=t(33661),o=t(12742),c=t(22700),u=t(95333),l=t(14175),d=t(3701),h=t(92954),v=t.n(h),m=t(67294),_=t(71515),p=t(8173),x=t(75508),N=t(49181),f=t(6420),g=t(63056),w="index-module__container___aHONT",Z="index-module__avatar___Nkg_1",k="index-module__avatar_button___LNr49",j="index-module__avatar_label___mCVZB",b="index-module__name_wrapper___gBR0j",T="index-module__name_input___qa9Sh",A=t(85893),C=function(a){(0,u.Z)(t,a);var e=(0,l.Z)(t);function t(a){var n,o,u;return(0,i.Z)(this,t),u=e.call(this,a),(0,d.Z)((0,c.Z)(u),"choosedAvatar",!1),(0,d.Z)((0,c.Z)(u),"onNameInput",(function(a){u.setState({name:a.detail.value})})),(0,d.Z)((0,c.Z)(u),"onChooseAvatar",(function(a){u.choosedAvatar=!0,u.setState({avatar:a.detail.avatarUrl})})),(0,d.Z)((0,c.Z)(u),"onSave",(0,s.Z)((0,r.Z)().mark((function a(){var e,t,n,s,i,o,c;return(0,r.Z)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(e=u.state,t=e.avatar,n=e.name,s=t,n){a.next=4;break}return a.abrupt("return",g.Z.showToast("请输入昵称"));case 4:if(v().showLoading({title:""}),!u.choosedAvatar){a.next=13;break}return v().showLoading({title:"上传头像中..."}),a.next=9,(0,p.Ix)(t);case 9:i=a.sent,o=i.data,c=JSON.parse(o),s=c.data.h640[0];case 13:u.props.dispatch({type:"user/updateNickNameAndAvatar",payload:{nickName:n,headimgurl:s}}).then((function(){v().navigateBack()}));case 14:case"end":return a.stop()}}),a)})))),u.state={showTip:!!(0,f.JU)(null===(n=v().getCurrentInstance)||void 0===n?void 0:n.call(v()))&&"1"===(0,f.JU)(null===(o=v().getCurrentInstance)||void 0===o?void 0:o.call(v())).showTip,name:"微信用户"===a.nickName?"":a.nickName,avatar:a.avatar||"https://mmbiz.qpic.cn/mmbiz/icTdbqWNOwNRna42FI242Lcia07jQodd2FJGIYQfG0LAJGFxM4FbnQP6yfMxBgJ0F3YRqJCJ1aPAK2dQagdusBZg/0"},u}return(0,o.Z)(t,[{key:"render",value:function(){var a=this.state,e=a.name,t=a.avatar,n=a.showTip;return(0,A.jsxs)(_.View,{className:w,children:[(0,A.jsxs)(_.View,{children:[n&&(0,A.jsx)(_.View,{style:{textAlign:"center"},children:(0,A.jsx)(_.Text,{children:"你还没有填写个人信息噢，快去完善吧～"})}),(0,A.jsxs)(_.Button,{className:k,"open-type":"chooseAvatar",onChooseavatar:this.onChooseAvatar,children:[(0,A.jsx)(_.Text,{className:j,children:"选择头像"}),(0,A.jsx)(_.Image,{className:Z,src:t})]}),(0,A.jsxs)(_.View,{className:b,children:[(0,A.jsx)(_.Text,{children:"输入昵称"}),(0,A.jsx)(_.Input,{className:T,type:"nickname",value:e,onInput:this.onNameInput,placeholder:"请输入昵称"}),(0,A.jsx)(_.Text,{style:"color: white",children:"输入昵称"})]})]}),(0,A.jsx)(N.Z,{label:"保存",onButtonClick:this.onSave})]})}}]),t}(m.PureComponent),I=(0,x.$j)((function(a){var e=a.user;return{nickName:e.nickName,avatar:e.avatar}}))(C);Page((0,n.createPageConfig)(I,"subpackages/mine/pages/user_info/index",{root:{cn:[]}},{navigationBarTitleText:"完善个人信息"}||{}))}},function(a){a.O(0,[2107,1216,8592],(function(){return e=42932,a(a.s=e);var e}));a.O()}]);