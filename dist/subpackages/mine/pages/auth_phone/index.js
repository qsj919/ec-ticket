"use strict";require("../../sub-vendors.js");(wx.webpackJsonp=wx.webpackJsonp||[]).push([[5e3],{13682:function(e,n,i){var s=i(32180),o=i(33661),t=i(12742),a=i(22700),c=i(95333),r=i(14175),l=i(3701),d=i(92954),_=i.n(d),h=i(67294),m=i(71515),u=i(2021),p=i(37001),x=i(6420),w=i(63056),g=i(75508),j="index-module__container___RUcPE",f="index-module__title___x7Wkd",N="index-module__itemTitle___h56RA",v="index-module__contentView____pvca",V="index-module__infoContent___WwLpg",Z="index-module__topView___JYf_z",y="index-module__itemView___mLJxa",P="index-module__itemContent___xazU8",T="index-module__redPoint2___WRoaL",k="index-module__redPoint1___ANo1j",I="index-module__bottomTitle___j6DPk",S="index-module__button___UQNGd",C="index-module__phone_button___q43oN",E=i(85893),b=function(e){(0,c.Z)(i,e);var n=(0,r.Z)(i);function i(){var e;(0,o.Z)(this,i);for(var s=arguments.length,t=new Array(s),c=0;c<s;c++)t[c]=arguments[c];return e=n.call.apply(n,[this].concat(t)),(0,l.Z)((0,a.Z)(e),"timer",null),(0,l.Z)((0,a.Z)(e),"from","normal"),(0,l.Z)((0,a.Z)(e),"mpErpId",""),(0,l.Z)((0,a.Z)(e),"checkShopAuth",(function(){var n=p.Z.getState().user;console.log("userPhone"+JSON.stringify(n.phone)),n.phone&&e.onBindSuccess()})),(0,l.Z)((0,a.Z)(e),"onGetPhone",(function(n){if(n.detail.errMsg.includes("ok")){var i=n.detail,s=i.encryptedData,o=i.iv,t=i.code;e.props.dispatch({type:"user/verifyPhone",payload:{encryptedData:s,iv:o,from:e.from,wechat:!0,code:t}}).then(e.onBindSuccess)}})),(0,l.Z)((0,a.Z)(e),"onBindSuccess",(function(){e.props.dispatch({type:"user/authShopStaff",payload:{mpErpId:e.mpErpId}}).then((function(){w.Z.showToast("授权成功")})).catch((function(){w.Z.showToast("授权成功")}))})),e}return(0,t.Z)(i,[{key:"componentDidMount",value:function(){var e,n,i=(0,x.JU)(null===(e=_().getCurrentInstance)||void 0===e?void 0:e.call(_())).mpErpId;console.log((0,x.JU)(null===(n=_().getCurrentInstance)||void 0===n?void 0:n.call(_()))),this.mpErpId=i,_().eventCenter.on("FETCH_USER_DATA",this.checkShopAuth)}},{key:"componentWillUnmount",value:function(){_().eventCenter.off("FETCH_USER_DATA")}},{key:"render",value:function(){return(0,E.jsxs)(m.View,{className:j,children:[(0,E.jsx)(m.Image,{src:u.Z.common.icon_authBg,style:{width:"100%"}}),(0,E.jsx)(m.View,{className:v,children:(0,E.jsxs)(m.View,{className:V,children:[(0,E.jsxs)(m.View,{className:Z,children:[(0,E.jsx)(m.View,{className:k}),(0,E.jsx)(m.View,{className:T}),(0,E.jsx)(m.View,{className:f,children:"可支持推送内容"}),(0,E.jsx)(m.View,{className:T}),(0,E.jsx)(m.View,{className:k})]}),(0,E.jsx)(m.View,{className:y,children:(0,E.jsxs)(m.View,{className:P,children:[(0,E.jsx)(m.Image,{src:u.Z.common.icon_send,style:{width:"48px",height:"48px",marginRight:"30px"}}),(0,E.jsx)(m.View,{className:N,children:"单据开始配送提醒"})]})}),(0,E.jsx)(m.View,{className:y,children:(0,E.jsxs)(m.View,{className:P,children:[(0,E.jsx)(m.Image,{src:u.Z.common.icon_deliver,style:{width:"48px",height:"48px",marginRight:"30px"}}),(0,E.jsx)(m.View,{className:N,children:"单据已送达提醒"})]})}),(0,E.jsx)(m.View,{className:y,children:(0,E.jsxs)(m.View,{className:P,children:[(0,E.jsx)(m.Image,{src:u.Z.common.icon_cancel,style:{width:"48px",height:"48px",marginRight:"30px"}}),(0,E.jsx)(m.View,{className:N,children:"单据已撤销送达提醒"})]})})]})}),(0,E.jsx)(m.View,{className:S,children:(0,E.jsx)(m.Button,{className:C,openType:"getPhoneNumber",onGetPhoneNumber:this.onGetPhone,disabled:!!this.props.userPhone,children:this.props.userPhone?"您已授权无需再授权":"授权认证"})}),(0,E.jsx)(m.View,{className:I,children:(0,E.jsx)(m.Text,{children:"杭州衣科信息技术有限公司提供支持"})})]})}}]),i}(h.PureComponent),A=(0,g.$j)((function(e){var n=e.user;return{phoneList:n.phoneList,userPhone:n.phone}}))(b);Page((0,s.createPageConfig)(A,"subpackages/mine/pages/auth_phone/index",{root:{cn:[]}},{navigationBarTitleText:""}||{}))}},function(e){e.O(0,[2107,1216,8592],(function(){return n=13682,e(e.s=n);var n}));e.O()}]);