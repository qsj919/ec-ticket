<!DOCTYPE html>
<html lang="zh-cmn-Hans">
  <head>
    <meta content="text/html; charset=utf-8" http-equiv="Content-Type" />
    <meta
      content="width=device-width,initial-scale=1,user-scalable=no,viewport-fit=cover"
      name="viewport"
    />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-touch-fullscreen" content="yes" />
    <meta name="format-detection" content="telephone=no,address=no" />
    <meta name="apple-mobile-web-app-status-bar-style" content="white" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <title></title>
    <script>
      function ding(feedback) {
        var host = window.location.origin
        if (host.indexOf('hzdev.hzdlsoft.com') > 0) return
        var url = host + '/slb/api.do'
        feedback = feedback + '，当前URL：' + document.URL
        feedback = encodeURIComponent(feedback)
        if (window.fetch) {
          window.fetch(url + '?apiKey=ec-mp-sendExpceptionMessage&content=' + feedback, {
            method: 'GET',
            headers: {
              'Content-Type': 'application/x-www-form-urlencoded'
            },
            mode: 'cors'
          })
        }
      }

      // 路由模式从hash改成browser
      // 兼容老的链接
      // // 2019.11.27
      // if (document.URL.indexOf('/#/') > -1) {
      //   var href = document.URL.replace('/#', '')
      //   // ding('逻辑异常，前端监控：URL含有井号，转换后的URL:' + href)
      //   document.location.href = href
      // } else if (/web\/\?/.test(document.URL)) {
      //   // 微信会自动添加参数 形如 web/?clicktime=123#/pages/index/index?a=b
      //   var href = document.URL.replace(/web\/\?.*#\//, 'web/')
      //   // ding('逻辑异常，前端监控：URL含有乱七八糟的参数,转换后的URL:'+ href)
      //   document.location.href = href
      // }
      !(function(x) {
        function w() {
          var v,
            u,
            t,
            tes,
            s = x.document,
            r = s.documentElement,
            a = r.getBoundingClientRect().width
          if (!v && !u) {
            var n = !!x.navigator.appVersion.match(/AppleWebKit.*Mobile.*/)
            v = x.devicePixelRatio
            tes = x.devicePixelRatio
            ;(v = n ? v : 1), (u = 1 / v)
          }
          if (a >= 580) {
            r.style.fontSize = '25px'
          } else {
            if (a <= 320) {
              r.style.fontSize = '20px'
            } else {
              r.style.fontSize = (a / 320) * 20 + 'px'
            }
          }
        }
        x.addEventListener('resize', function() {
          w()
        })
        w()
      })(window)

      // 监听资源文件的加载
      window.addEventListener(
        'error',
        function(e) {
          var name = e.target.tagName && e.target.tagName.toLowerCase()
          if (name === 'link') {
            ding('逻辑异常，前端监控：文件加载失败，地址:' + e.target.href)
          } else if (name === 'script') {
            ding('逻辑异常，前端监控：文件加载失败，地址:' + e.target.src)
          }
        },
        true
      )
    </script>
  </head>

  <body>
    <div id="app"></div>
    <script type="text/javascript" src="https://res.wx.qq.com/open/js/jweixin-1.4.0.js"></script>
    <!-- <script type="text/javascript" src="https://webapi.amap.com/maps?v=1.4.15&key=f82b50aaff2bb887634805f322f57bd0" async></script>  -->
    <!-- <script src="https://res.wx.qq.com/mmbizwap/zh_CN/htmledition/js/vconsole/3.0.0/vconsole.min.js" type="text/javascript"></script> -->
  </body>
  <script>
    // var vConsole = new VConsole();
  </script>
</html>
